"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = handler;
const postgres_1 = require("@vercel/postgres");
function handler(request, response) {
    return __awaiter(this, void 0, void 0, function* () {
        try {
            const result = yield (0, postgres_1.sql) `DROP TABLE IF EXISTS ideas;
      CREATE TABLE ideas (
      id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
      ideaName TEXT NOT NULL,
      ideaSummary TEXT NOT NULL,
      authorName TEXT NOT NULL,
      email TEXT NOT NULL,
      claimed boolean not null,
      submitted boolean not null
);;`;
            return response.status(200).json({ result });
        }
        catch (error) {
            return response.status(500).json({ error });
        }
    });
}
